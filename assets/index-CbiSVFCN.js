import*as i from"three";import{Ray as We,Plane as Ve,MathUtils as qe,EventDispatcher as Be,Vector3 as g,MOUSE as G,TOUCH as Z,Quaternion as Te,Spherical as Ae,Vector2 as P}from"three";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&e(p)}).observe(document,{childList:!0,subtree:!0});function M(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function e(o){if(o.ep)return;o.ep=!0;const a=M(o);fetch(o.href,a)}})();const Oe={type:"change"},ie={type:"start"},Le={type:"end"},$=new We,Se=new Ve,Qe=Math.cos(70*qe.DEG2RAD);class $e extends Be{constructor(u,M){super(),this.object=u,this.domElement=M,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new g,this.cursor=new g,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:G.ROTATE,MIDDLE:G.DOLLY,RIGHT:G.PAN},this.touches={ONE:Z.ROTATE,TWO:Z.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return c.phi},this.getAzimuthalAngle=function(){return c.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(t){t.addEventListener("keydown",ne),this._domElementKeyEvents=t},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",ne),this._domElementKeyEvents=null},this.saveState=function(){e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=function(){e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(Oe),e.update(),a=o.NONE},this.update=function(){const t=new g,n=new Te().setFromUnitVectors(u.up,new g(0,1,0)),d=n.clone().invert(),h=new g,y=new Te,K=new g,z=2*Math.PI;return function(ve=null){const xe=e.object.position;t.copy(xe).sub(e.target),t.applyQuaternion(n),c.setFromVector3(t),e.autoRotate&&a===o.NONE&&k(q(ve)),e.enableDamping?(c.theta+=b.theta*e.dampingFactor,c.phi+=b.phi*e.dampingFactor):(c.theta+=b.theta,c.phi+=b.phi);let D=e.minAzimuthAngle,j=e.maxAzimuthAngle;isFinite(D)&&isFinite(j)&&(D<-Math.PI?D+=z:D>Math.PI&&(D-=z),j<-Math.PI?j+=z:j>Math.PI&&(j-=z),D<=j?c.theta=Math.max(D,Math.min(j,c.theta)):c.theta=c.theta>(D+j)/2?Math.max(D,c.theta):Math.min(j,c.theta)),c.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,c.phi)),c.makeSafe(),e.enableDamping===!0?e.target.addScaledVector(l,e.dampingFactor):e.target.add(l),e.target.sub(e.cursor),e.target.clampLength(e.minTargetRadius,e.maxTargetRadius),e.target.add(e.cursor),e.zoomToCursor&&Y||e.object.isOrthographicCamera?c.radius=te(c.radius):c.radius=te(c.radius*x),t.setFromSpherical(c),t.applyQuaternion(d),xe.copy(e.target).add(t),e.object.lookAt(e.target),e.enableDamping===!0?(b.theta*=1-e.dampingFactor,b.phi*=1-e.dampingFactor,l.multiplyScalar(1-e.dampingFactor)):(b.set(0,0,0),l.set(0,0,0));let B=!1;if(e.zoomToCursor&&Y){let W=null;if(e.object.isPerspectiveCamera){const V=t.length();W=te(V*x);const Q=V-W;e.object.position.addScaledVector(X,Q),e.object.updateMatrixWorld()}else if(e.object.isOrthographicCamera){const V=new g(O.x,O.y,0);V.unproject(e.object),e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/x)),e.object.updateProjectionMatrix(),B=!0;const Q=new g(O.x,O.y,0);Q.unproject(e.object),e.object.position.sub(Q).add(V),e.object.updateMatrixWorld(),W=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),e.zoomToCursor=!1;W!==null&&(this.screenSpacePanning?e.target.set(0,0,-1).transformDirection(e.object.matrix).multiplyScalar(W).add(e.object.position):($.origin.copy(e.object.position),$.direction.set(0,0,-1).transformDirection(e.object.matrix),Math.abs(e.object.up.dot($.direction))<Qe?u.lookAt(e.target):(Se.setFromNormalAndCoplanarPoint(e.object.up,e.target),$.intersectPlane(Se,e.target))))}else e.object.isOrthographicCamera&&(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/x)),e.object.updateProjectionMatrix(),B=!0);return x=1,Y=!1,B||h.distanceToSquared(e.object.position)>p||8*(1-y.dot(e.object.quaternion))>p||K.distanceToSquared(e.target)>0?(e.dispatchEvent(Oe),h.copy(e.object.position),y.copy(e.object.quaternion),K.copy(e.target),B=!1,!0):!1}}(),this.dispose=function(){e.domElement.removeEventListener("contextmenu",Pe),e.domElement.removeEventListener("pointerdown",we),e.domElement.removeEventListener("pointercancel",v),e.domElement.removeEventListener("wheel",Ee),e.domElement.removeEventListener("pointermove",oe),e.domElement.removeEventListener("pointerup",v),e._domElementKeyEvents!==null&&(e._domElementKeyEvents.removeEventListener("keydown",ne),e._domElementKeyEvents=null)};const e=this,o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=o.NONE;const p=1e-6,c=new Ae,b=new Ae;let x=1;const l=new g,w=new P,f=new P,m=new P,L=new P,T=new P,S=new P,C=new P,A=new P,I=new P,X=new g,O=new P;let Y=!1;const r=[],H={};function q(t){return t!==null?2*Math.PI/60*e.autoRotateSpeed*t:2*Math.PI/60/60*e.autoRotateSpeed}function N(){return Math.pow(.95,e.zoomSpeed)}function k(t){b.theta-=t}function R(t){b.phi-=t}const E=function(){const t=new g;return function(d,h){t.setFromMatrixColumn(h,0),t.multiplyScalar(-d),l.add(t)}}(),ce=function(){const t=new g;return function(d,h){e.screenSpacePanning===!0?t.setFromMatrixColumn(h,1):(t.setFromMatrixColumn(h,0),t.crossVectors(e.object.up,t)),t.multiplyScalar(d),l.add(t)}}(),_=function(){const t=new g;return function(d,h){const y=e.domElement;if(e.object.isPerspectiveCamera){const K=e.object.position;t.copy(K).sub(e.target);let z=t.length();z*=Math.tan(e.object.fov/2*Math.PI/180),E(2*d*z/y.clientHeight,e.object.matrix),ce(2*h*z/y.clientHeight,e.object.matrix)}else e.object.isOrthographicCamera?(E(d*(e.object.right-e.object.left)/e.object.zoom/y.clientWidth,e.object.matrix),ce(h*(e.object.top-e.object.bottom)/e.object.zoom/y.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}}();function ee(t){e.object.isPerspectiveCamera||e.object.isOrthographicCamera?x/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function le(t){e.object.isPerspectiveCamera||e.object.isOrthographicCamera?x*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function de(t){if(!e.zoomToCursor)return;Y=!0;const n=e.domElement.getBoundingClientRect(),d=t.clientX-n.left,h=t.clientY-n.top,y=n.width,K=n.height;O.x=d/y*2-1,O.y=-(h/K)*2+1,X.set(O.x,O.y,1).unproject(e.object).sub(e.object.position).normalize()}function te(t){return Math.max(e.minDistance,Math.min(e.maxDistance,t))}function ue(t){w.set(t.clientX,t.clientY)}function je(t){de(t),C.set(t.clientX,t.clientY)}function pe(t){L.set(t.clientX,t.clientY)}function Ce(t){f.set(t.clientX,t.clientY),m.subVectors(f,w).multiplyScalar(e.rotateSpeed);const n=e.domElement;k(2*Math.PI*m.x/n.clientHeight),R(2*Math.PI*m.y/n.clientHeight),w.copy(f),e.update()}function Re(t){A.set(t.clientX,t.clientY),I.subVectors(A,C),I.y>0?ee(N()):I.y<0&&le(N()),C.copy(A),e.update()}function ze(t){T.set(t.clientX,t.clientY),S.subVectors(T,L).multiplyScalar(e.panSpeed),_(S.x,S.y),L.copy(T),e.update()}function Ie(t){de(t),t.deltaY<0?le(N()):t.deltaY>0&&ee(N()),e.update()}function Ne(t){let n=!1;switch(t.code){case e.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?R(2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):_(0,e.keyPanSpeed),n=!0;break;case e.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?R(-2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):_(0,-e.keyPanSpeed),n=!0;break;case e.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?k(2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):_(e.keyPanSpeed,0),n=!0;break;case e.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?k(-2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):_(-e.keyPanSpeed,0),n=!0;break}n&&(t.preventDefault(),e.update())}function he(){if(r.length===1)w.set(r[0].pageX,r[0].pageY);else{const t=.5*(r[0].pageX+r[1].pageX),n=.5*(r[0].pageY+r[1].pageY);w.set(t,n)}}function fe(){if(r.length===1)L.set(r[0].pageX,r[0].pageY);else{const t=.5*(r[0].pageX+r[1].pageX),n=.5*(r[0].pageY+r[1].pageY);L.set(t,n)}}function me(){const t=r[0].pageX-r[1].pageX,n=r[0].pageY-r[1].pageY,d=Math.sqrt(t*t+n*n);C.set(0,d)}function ke(){e.enableZoom&&me(),e.enablePan&&fe()}function Ye(){e.enableZoom&&me(),e.enableRotate&&he()}function ye(t){if(r.length==1)f.set(t.pageX,t.pageY);else{const d=ae(t),h=.5*(t.pageX+d.x),y=.5*(t.pageY+d.y);f.set(h,y)}m.subVectors(f,w).multiplyScalar(e.rotateSpeed);const n=e.domElement;k(2*Math.PI*m.x/n.clientHeight),R(2*Math.PI*m.y/n.clientHeight),w.copy(f)}function ge(t){if(r.length===1)T.set(t.pageX,t.pageY);else{const n=ae(t),d=.5*(t.pageX+n.x),h=.5*(t.pageY+n.y);T.set(d,h)}S.subVectors(T,L).multiplyScalar(e.panSpeed),_(S.x,S.y),L.copy(T)}function be(t){const n=ae(t),d=t.pageX-n.x,h=t.pageY-n.y,y=Math.sqrt(d*d+h*h);A.set(0,y),I.set(0,Math.pow(A.y/C.y,e.zoomSpeed)),ee(I.y),C.copy(A)}function He(t){e.enableZoom&&be(t),e.enablePan&&ge(t)}function _e(t){e.enableZoom&&be(t),e.enableRotate&&ye(t)}function we(t){e.enabled!==!1&&(r.length===0&&(e.domElement.setPointerCapture(t.pointerId),e.domElement.addEventListener("pointermove",oe),e.domElement.addEventListener("pointerup",v)),Ue(t),t.pointerType==="touch"?Ze(t):Ke(t))}function oe(t){e.enabled!==!1&&(t.pointerType==="touch"?Fe(t):Ge(t))}function v(t){Xe(t),r.length===0&&(e.domElement.releasePointerCapture(t.pointerId),e.domElement.removeEventListener("pointermove",oe),e.domElement.removeEventListener("pointerup",v)),e.dispatchEvent(Le),a=o.NONE}function Ke(t){let n;switch(t.button){case 0:n=e.mouseButtons.LEFT;break;case 1:n=e.mouseButtons.MIDDLE;break;case 2:n=e.mouseButtons.RIGHT;break;default:n=-1}switch(n){case G.DOLLY:if(e.enableZoom===!1)return;je(t),a=o.DOLLY;break;case G.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enablePan===!1)return;pe(t),a=o.PAN}else{if(e.enableRotate===!1)return;ue(t),a=o.ROTATE}break;case G.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enableRotate===!1)return;ue(t),a=o.ROTATE}else{if(e.enablePan===!1)return;pe(t),a=o.PAN}break;default:a=o.NONE}a!==o.NONE&&e.dispatchEvent(ie)}function Ge(t){switch(a){case o.ROTATE:if(e.enableRotate===!1)return;Ce(t);break;case o.DOLLY:if(e.enableZoom===!1)return;Re(t);break;case o.PAN:if(e.enablePan===!1)return;ze(t);break}}function Ee(t){e.enabled===!1||e.enableZoom===!1||a!==o.NONE||(t.preventDefault(),e.dispatchEvent(ie),Ie(t),e.dispatchEvent(Le))}function ne(t){e.enabled===!1||e.enablePan===!1||Ne(t)}function Ze(t){switch(Me(t),r.length){case 1:switch(e.touches.ONE){case Z.ROTATE:if(e.enableRotate===!1)return;he(),a=o.TOUCH_ROTATE;break;case Z.PAN:if(e.enablePan===!1)return;fe(),a=o.TOUCH_PAN;break;default:a=o.NONE}break;case 2:switch(e.touches.TWO){case Z.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;ke(),a=o.TOUCH_DOLLY_PAN;break;case Z.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;Ye(),a=o.TOUCH_DOLLY_ROTATE;break;default:a=o.NONE}break;default:a=o.NONE}a!==o.NONE&&e.dispatchEvent(ie)}function Fe(t){switch(Me(t),a){case o.TOUCH_ROTATE:if(e.enableRotate===!1)return;ye(t),e.update();break;case o.TOUCH_PAN:if(e.enablePan===!1)return;ge(t),e.update();break;case o.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;He(t),e.update();break;case o.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;_e(t),e.update();break;default:a=o.NONE}}function Pe(t){e.enabled!==!1&&t.preventDefault()}function Ue(t){r.push(t)}function Xe(t){delete H[t.pointerId];for(let n=0;n<r.length;n++)if(r[n].pointerId==t.pointerId){r.splice(n,1);return}}function Me(t){let n=H[t.pointerId];n===void 0&&(n=new P,H[t.pointerId]=n),n.set(t.pageX,t.pageY)}function ae(t){const n=t.pointerId===r[0].pointerId?r[1]:r[0];return H[n.pointerId]}e.domElement.addEventListener("contextmenu",Pe),e.domElement.addEventListener("pointerdown",we),e.domElement.addEventListener("pointercancel",v),e.domElement.addEventListener("wheel",Ee,{passive:!1}),this.update()}}function Je(s,u,M){try{const e=new i.DirectionalLight(16777215,.5);e.position.set(100,100,0),e.lookAt(0,0,0),s.add(e);const o=new i.DirectionalLight(16777215,.5);o.position.set(0,100,100),o.lookAt(0,0,0),s.add(o);const a=new i.AmbientLight(4210752);s.add(a),u.position.set(15,15,15),u.lookAt(0,0,0);const p=new $e(u,M.domElement);return p.enableDamping=!0,p.dampingFactor=.05,p.screenSpacePanning=!1,p.minDistance=5,p.maxDistance=50,p.maxPolarAngle=Math.PI,p.minPolarAngle=0,p}catch(e){console.error("Error in createLightsAndCamera",e)}}function et(s,u=!1){try{const o=new i.Mesh(new i.PlaneGeometry(10,10),new i.MeshPhongMaterial({color:16711680,side:i.DoubleSide,transparent:!0,opacity:.5}));o.rotation.y=Math.PI/2,s.add(o);const a=new i.Mesh(new i.PlaneGeometry(10,10),new i.MeshPhongMaterial({color:65280,side:i.DoubleSide,transparent:!0,opacity:.5}));a.rotation.x=Math.PI/2,s.add(a);const p=new i.Mesh(new i.PlaneGeometry(10,10),new i.MeshPhongMaterial({color:255,side:i.DoubleSide,transparent:!0,opacity:.5}));s.add(p);const c=new i.GridHelper(10,10,16777215,16777215);s.add(c);const b=c.clone();b.rotation.x=Math.PI/2,s.add(b);const x=c.clone();x.rotation.z=Math.PI/2,s.add(x);const l=.5,w=.2,f=10/2+l/2,m=.05,L=new i.CylinderGeometry(m,m,f*2+l,32),T=new i.MeshPhongMaterial({color:16711680}),S=new i.Mesh(L,T);S.rotation.z=-Math.PI/2,s.add(S);const C=new i.ConeGeometry(w,l,32),A=new i.Mesh(C,T);if(A.position.x=f+l/2,A.rotation.z=-Math.PI/2,s.add(A),u){const E=re("X",{x:f+l+1,y:0,z:0},16711680);textMeshes.push(E),s.add(E)}const I=new i.CylinderGeometry(m,m,f*2+l,32),X=new i.MeshPhongMaterial({color:65280}),O=new i.Mesh(I,X);s.add(O);const Y=new i.ConeGeometry(w,l,32),r=new i.Mesh(Y,X);if(r.position.y=f+l/2,s.add(r),u){const E=re("Y",{x:0,y:f+l+1,z:0},65280);textMeshes.push(E),s.add(E)}const H=new i.CylinderGeometry(m,m,f*2+l,32),q=new i.MeshPhongMaterial({color:255}),N=new i.Mesh(H,q);N.rotation.x=Math.PI/2,s.add(N);const k=new i.ConeGeometry(w,l,32),R=new i.Mesh(k,q);if(R.position.z=f+l/2,R.rotation.x=Math.PI/2,s.add(R),u){const E=re("Z",{x:0,y:0,z:f+l+1},255);textMeshes.push(E),s.add(E)}}catch(M){console.error("Error in createPlanesAndAxes",M)}}function re(s,u,M){new i.FontLoader().load("fonts/helvetiker_regular.typeface.json",function(o){const a=new i.TextGeometry(s,{font:o,size:1,height:.1}),p=new i.MeshBasicMaterial({color:M}),c=new i.Mesh(a,p);return c.position.set(u.x,u.y,u.z),c})}let J,U,F,se,tt=[];const ot=!1;function nt(){try{J=new i.Scene,U=new i.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),F=new i.WebGLRenderer,F.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(F.domElement),se=Je(J,U,F),et(J,ot),console.log("Scene setup complete")}catch(s){console.error("Error during scene setup:",s)}}window.addEventListener("resize",at,!1);function at(){U.aspect=window.innerWidth/window.innerHeight,U.updateProjectionMatrix(),F.setSize(window.innerWidth,window.innerHeight)}function De(){requestAnimationFrame(De);try{typeof se<"u"&&se.update(),tt.forEach(s=>{s.lookAt(U.position)}),F.render(J,U)}catch(s){console.error("Error during animation:",s)}}async function it(){await nt(),De()}it();console.log("Script execution complete");
